import{j as e}from"./jsx-runtime.7faW4zRM.js";import{r as l}from"./index.DhYZZe0J.js";import{p as f,a as k,g,s as j,l as v}from"./agents.DhEp7OFU.js";function N({providers:s,selectedProvider:i,onProviderChange:a}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"provider-select",className:"block text-sm font-medium text-skin-base mb-2",children:"Target LLM"}),e.jsx("select",{id:"provider-select",value:i.id,onChange:o=>{const c=s.find(x=>x.id===o.target.value);c&&a(c)},className:"block w-full max-w-xs rounded-md border border-skin-line bg-skin-fill px-3 py-2 text-skin-base focus:border-skin-accent focus:outline-none focus:ring-1 focus:ring-skin-accent",children:s.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))}),e.jsx("p",{className:"mt-1 text-sm text-skin-base opacity-70",children:i.supportsDirectPrompt?"Supports direct prompt injection":"Prompt will be copied to clipboard"})]})}function y({agents:s,onFilteredAgentsChange:i}){const[a,o]=l.useState(""),[c,x]=l.useState(""),u=l.useMemo(()=>{const t=s.flatMap(d=>d.tags);return[...new Set(t)].sort()},[s]);return l.useEffect(()=>{let t=s;if(a){const d=a.toLowerCase();t=t.filter(m=>m.name.toLowerCase().includes(d)||m.description.toLowerCase().includes(d)||m.tags.some(h=>h.toLowerCase().includes(d)))}c&&(t=t.filter(d=>d.tags.includes(c))),i(t)},[a,c,s,i]),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"agent-search",className:"sr-only",children:"Search agents"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"agent-search",type:"text",value:a,onChange:t=>o(t.target.value),placeholder:"Search agents by name, description, or tags...",className:"w-full rounded-md border border-skin-line bg-skin-fill px-4 py-2 pl-10 text-skin-base focus:border-skin-accent focus:outline-none focus:ring-1 focus:ring-skin-accent"}),e.jsx("svg",{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-skin-base opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tag-filter",className:"sr-only",children:"Filter by tag"}),e.jsxs("select",{id:"tag-filter",value:c,onChange:t=>x(t.target.value),className:"rounded-md border border-skin-line bg-skin-fill px-3 py-2 text-skin-base focus:border-skin-accent focus:outline-none focus:ring-1 focus:ring-skin-accent",children:[e.jsx("option",{value:"",children:"All categories"}),u.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),(a||c)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-skin-base opacity-70",children:"Active filters:"}),a&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-skin-accent px-3 py-1 text-xs text-skin-inverted",children:['Search: "',a,'"',e.jsx("button",{onClick:()=>o(""),className:"hover:bg-opacity-80","aria-label":"Clear search",children:"×"})]}),c&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-skin-accent px-3 py-1 text-xs text-skin-inverted",children:["Tag: ",c,e.jsx("button",{onClick:()=>x(""),className:"hover:bg-opacity-80","aria-label":"Clear tag filter",children:"×"})]})]})]})}function w({agent:s,onClick:i}){return e.jsxs("div",{className:"cursor-pointer rounded-lg border border-skin-line bg-skin-card p-4 transition-colors hover:border-skin-accent hover:bg-skin-card-muted",onClick:()=>i(s),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i(s))},tabIndex:0,role:"button","aria-label":`Open ${s.name} agent details`,children:[e.jsx("h3",{className:"font-semibold text-skin-base",children:s.name}),e.jsx("p",{className:"mt-2 text-sm text-skin-base opacity-80 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.tags.slice(0,3).map(a=>e.jsx("span",{className:"inline-block rounded bg-skin-accent px-2 py-1 text-xs text-skin-inverted",children:a},a)),s.tags.length>3&&e.jsxs("span",{className:"inline-block rounded border border-skin-line px-2 py-1 text-xs text-skin-base",children:["+",s.tags.length-3," more"]})]})]})}function C({agent:s,provider:i,isOpen:a,onClose:o,onLaunch:c}){const[x,u]=l.useState(""),[t,d]=l.useState({});l.useEffect(()=>{if(s){const n=s.promptTemplate.match(/\{\{(\w+)\}\}/g),r={};n&&n.forEach(p=>{const b=p.slice(2,-2);r[b]=""}),d(r),u(s.promptTemplate)}},[s]);const m=l.useMemo(()=>{let n=x;return Object.entries(t).forEach(([r,p])=>{n=n.replace(new RegExp(`\\{\\{${r}\\}\\}`,"g"),p)}),n},[x,t]),h=async()=>{try{await navigator.clipboard.writeText(m)}catch(n){console.error("Failed to copy to clipboard:",n)}};return!a||!s?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"max-h-[90vh] w-full max-w-4xl overflow-y-auto rounded-lg bg-skin-fill border border-skin-line",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-skin-line p-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-skin-base",children:s.name}),e.jsx("p",{className:"text-sm text-skin-base opacity-80",children:s.description})]}),e.jsx("button",{onClick:o,className:"rounded p-2 text-skin-base hover:bg-skin-card","aria-label":"Close agent details",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(n=>e.jsx("span",{className:"inline-block rounded bg-skin-accent px-2 py-1 text-xs text-skin-inverted",children:n},n))})}),Object.keys(t).length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium text-skin-base",children:"Variables"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t).map(([n,r])=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:`var-${n}`,className:"block text-sm text-skin-base",children:n}),e.jsx("input",{id:`var-${n}`,type:"text",value:r,onChange:p=>d(b=>({...b,[n]:p.target.value})),className:"mt-1 block w-full rounded border border-skin-line bg-skin-fill px-3 py-2 text-skin-base focus:border-skin-accent focus:outline-none focus:ring-1 focus:ring-skin-accent",placeholder:`Enter ${n}...`})]},n))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium text-skin-base",children:"Prompt Template"}),e.jsx("textarea",{value:x,onChange:n=>u(n.target.value),className:"h-40 w-full rounded border border-skin-line bg-skin-fill p-3 text-sm text-skin-base focus:border-skin-accent focus:outline-none focus:ring-1 focus:ring-skin-accent",placeholder:"Edit your prompt here..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium text-skin-base",children:"Final Prompt"}),e.jsx("div",{className:"max-h-32 overflow-y-auto rounded border border-skin-line bg-skin-card p-3 text-sm text-skin-base",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:m})})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[e.jsx("button",{onClick:()=>c(m),className:"rounded bg-skin-accent px-4 py-2 text-skin-inverted hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-skin-accent focus:ring-offset-2",children:i.supportsDirectPrompt?`Open in ${i.name}`:`Open ${i.name} & Copy Prompt`}),e.jsx("button",{onClick:h,className:"rounded border border-skin-line px-4 py-2 text-skin-base hover:bg-skin-card focus:outline-none focus:ring-2 focus:ring-skin-accent focus:ring-offset-2",children:"Copy Prompt"})]}),e.jsxs("div",{className:"mt-4 text-xs text-skin-base opacity-60",children:["Target: ",i.name,i.supportsDirectPrompt?" (supports direct prompt injection)":" (prompt will be copied to clipboard)"]})]})]})})}function T(){const[s,i]=l.useState(f[0]),[a,o]=l.useState(k),[c,x]=l.useState(null),[u,t]=l.useState(!1);l.useEffect(()=>{const r=g(f);r&&r.id!==s.id&&i(r)},[]);const d=l.useCallback(r=>{i(r),j(r)},[]),m=l.useCallback(r=>{x(r),t(!0)},[]),h=l.useCallback(()=>{t(!1),x(null)},[]),n=l.useCallback(async r=>{try{await v(s,r),t(!1)}catch(p){console.error("Failed to launch provider:",p)}},[s]);return e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsx(N,{providers:f,selectedProvider:s,onProviderChange:d}),e.jsx(y,{agents:k,onFilteredAgentsChange:o}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(r=>e.jsx(w,{agent:r,onClick:m},r.id))}),a.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-skin-base opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-skin-base",children:"No agents found"}),e.jsx("p",{className:"mt-2 text-skin-base opacity-70",children:"Try adjusting your search or filter criteria."})]}),e.jsx(C,{agent:c,provider:s,isOpen:u,onClose:h,onLaunch:n})]})}export{T as default};
