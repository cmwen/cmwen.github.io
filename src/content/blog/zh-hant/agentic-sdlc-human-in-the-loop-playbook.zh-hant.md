---
lang: zh-hant
translatedFrom: en
baseSlug: agentic-sdlc-human-in-the-loop-playbook
title: "Agentic SDLC 實戰手冊：關鍵節點的人在回路 (HITL)"
description: "把 LLM Agents 納入軟體開發生命週期：讓代理負責重活與證據蒐集，人在關鍵決策點依據證據審核，兼顧速度與風險。"
pubDatetime: 2025-08-25T12:00:00.000Z
author: Min Wen
tags:
  - agents
  - sdlc
  - ai
  - process
featured: true
---

將大型語言模型（LLM）代理導入 SDLC 能帶來自動化與規模，但也引入新風險，需要人在關鍵時刻判斷。本手冊提供一套「agentic」SDLC 做法：代理負責願景、設計、程式、測試與監控等重活；人在明確的決策關卡審核「證據包」。

## 為什麼重要

代理能加速撰寫 ADR、測試、遷移、事件分流等，但若完全自動化，風險與責任容易失控。把「審查焦點」從逐字檢查產物，轉為審閱「證據」，能兼顧速度、可追溯與多觀點思考。

## 核心原則

- 人審證據，不審全部產物。代理輸出設計、程式、測試與精簡的證據包（影響、風險、測試結果、回滾方案）。
- 以「觀點」而非職稱來分工。代理在願景、設計、執行、風險、可觀測性間切換觀點。
- 風險分級的 HITL。高風險決策需人簽核；低風險則自動通過，搭配抽驗。
- 需求版本化。把需求當程式碼管理：版本化、比對差異、先做影響分析再接受。

## 元代理角色

- 願景／策略代理：產出 Vision Brief 與選項，對齊 KPI。
- 設計／架構代理：撰寫 ADR、適配度檢查、簡潔威脅模型摘要。
- 執行代理：產出程式、測試、遷移腳本與風險加權 PR。
- 風險與法規代理：授權檢查、相依與隱私／安全掃描。
- 可觀測性代理：驗證假設、彙整訊號、提出下一步建議。
- 統籌代理：協調多代理、打包證據、向人類升級。

## 人在回路的決策關卡

1. 願景關卡：人審 Vision Brief（目標、KPI、限制）。
2. 需求承諾關卡：薄切凍結 1–3 天交付；改動需附影響分析。
3. 高風險設計關卡：跨資料表、外部合約、SLO 影響—審 ADR 摘要與威脅模型。
4. 程式變更關卡：依風險分流：高→人審；中→同儕代理審；低→自動合併＋抽驗。
5. 發佈關卡：人核准發布策略（旗標、金絲雀、回滾計畫）。
6. 事故關卡：SLO 失守時由統籌代理打包證據，進行人主導的無責檢討。
7. 模型／工具變更關卡：AI 堆疊的任何變更一律高風險，必須人簽核。

## 證據包內容

- 變更摘要：改了什麼、為什麼。
- 影響分析：受影響模組、合約、下游。
- 測試證據：涵蓋率差異、關鍵情境重放結果。
- 安全／品質掃描：SAST、相依、祕密掃描。
- 回滾計畫：腳本或手動回滾步驟，已演練。

## 風險評分與自動化策略

簡單可解釋公式（起手式）：

風險 = 重要性(1–5) × 變更尺寸(1–5) + 覆蓋率缺口%(0–5) + 汰換率(0–3) + 新穎度(0–3)

- 高 (≥10)：需人審
- 中 (6–9)：同儕代理審
- 低 (≤5)：自動通過＋10–20% 抽驗

## 最小可行導入

1. 建立文件夾：/docs/vision, /docs/adr, /docs/risk, /docs/trace
2. PR 範本要求附證據包
3. 高風險模組設 CODEOWNERS
4. 上線策略：功能旗標、簡易金絲雀、已測回滾腳本
5. 風險評分腳本（用 diff 大小、涵蓋率、汰換率）
6. 關鍵 API 的契約測試
7. 關鍵模組做 mutation testing，追蹤回歸指標

## 收尾

Agentic SDLC 讓代理負責例行生成、人在高槓桿決策審證據。從低風險自動化起步，逐步擴張代理權限，同時維持清楚的 HITL 關卡與紀錄。
